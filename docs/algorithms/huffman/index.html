<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><title>Huffman - The Hitchhiker's Guide to Compression</title><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2709176-10"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2709176-10', { 'anonymize_ip': true }); </script> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Huffman | The Hitchhiker’s Guide to Compression</title><meta name="generator" content="Jekyll v4.1.1" /><meta property="og:title" content="Huffman" /><meta property="og:locale" content="en_US" /><meta name="description" content="A collection of resources and posts to help people understand compression algorithms." /><meta property="og:description" content="A collection of resources and posts to help people understand compression algorithms." /><link rel="canonical" href="/algorithms/huffman/" /><meta property="og:url" content="/algorithms/huffman/" /><meta property="og:site_name" content="The Hitchhiker’s Guide to Compression" /> <script type="application/ld+json"> {"url":"/algorithms/huffman/","@type":"WebPage","headline":"Huffman","description":"A collection of resources and posts to help people understand compression algorithms.","@context":"https://schema.org"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="/" class="site-title lh-tight"> The Hitchhiker's Guide to Compression </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Overview</a><li class="nav-list-item"><a href="/getting_started/" class="nav-list-link">Getting Started</a><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/algorithms/overview/" class="nav-list-link">Overview of Algorithms</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/algorithms/lz/" class="nav-list-link">Lempel-Ziv</a><ul class="nav-list"><li class="nav-list-item "> <a href="/algorithms/lzss/" class="nav-list-link">LZSS</a></ul><li class="nav-list-item active"><a href="/algorithms/huffman/" class="nav-list-link active">Huffman</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/interactive/interactive/" class="nav-list-link">Interactive Algorithms</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/interactive/lz/" class="nav-list-link">LZ77/LZSS</a><ul class="nav-list"><li class="nav-list-item "> <a href="/interactive/fullscreen_lz/" class="nav-list-link">Fullscreen LZ77/LZSS</a></ul></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/reference/reference/" class="nav-list-link">Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="/reference/bytes/" class="nav-list-link">Bytes, Bits, and Nibbles</a><li class="nav-list-item "><a href="/reference/encodings/" class="nav-list-link">File Encodings</a><li class="nav-list-item "><a href="/reference/compression_ratios/" class="nav-list-link">Compression Ratios</a><li class="nav-list-item "><a href="/reference/magic_types/" class="nav-list-link">Unix Magic Types</a></ul><li class="nav-list-item"><a href="/contributing/" class="nav-list-link">Contributing</a><li class="nav-list-item"><a href="/attributions/" class="nav-list-link">Attributions</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search The Hitchhiker's Guide to Compression" aria-label="Search The Hitchhiker's Guide to Compression" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="//github.com/pmarsceill/just-the-docs" class="site-button" > Just the Docs on GitHub </a><li class="aux-nav-list-item"> <a href="https://github.com/go-compression/go-compression.github.io" class="site-button" > View on GitHub </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/algorithms/overview/">Overview of Algorithms</a><li class="breadcrumb-nav-list-item"><span>Huffman</span></ol></nav><div id="main-content" class="main-content" role="main"><h1 id="huffman"> <a href="#huffman" class="anchor-heading" aria-labelledby="huffman"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Huffman</h1><p>Since it’s creation by David A. Huffman in 1952, Huffman coding has been regarded as one of the most efficient and optimal methods of compression. Huffman’s optimal compression ratios are made possible through it’s character counting functionality. Unlike many algorithims in the Lempel-Ziv suite, Huffman encoders scan the file and generate a frequency table and tree before begining the true compression process. Before discussing different implementations, lets dive deeper into how the algorithim works.</p><h1 id="the-algorithm"> <a href="#the-algorithm" class="anchor-heading" aria-labelledby="the-algorithm"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The Algorithm</h1><p>Although huffman encoding may seem confusing from an outside view, we can break it into three simple steps:</p><ul><li><p><a href="#Frequency&nbsp;Counting">Frequency Counting</a></p><li><p><a href="#Tree&nbsp;Building">Tree Building</a></p><li><p><a href="#Character&nbsp;Encoding">Character Encoding</a></p></ul><h2 id="frequency-counting"> <a href="#frequency-counting" class="anchor-heading" aria-labelledby="frequency-counting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Frequency Counting</h2><p>Let’s start out by going over the frequency counting step. Throughout all of the examples, I will be using the following sample input string:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>I AM SAM. I AM SAM. SAM I AM.   
THAT SAM-I-AM! THAT SAM-I-AM! I DO NOT LIKE THAT SAM-I-AM!
</code></pre></div></div><p>The huffman encoder starts out by going over the inputed text and outputing a table correlating each character to the number of time it appears in the text. For the sample input, the table would look this:</p><div class="table-wrapper"><table><thead><tr><th>Frequency<th>Character<tbody><tr><td>1<td>N<tr><td>1<td>\n<tr><td>1<td>K<tr><td>1<td>D<tr><td>1<td>L<tr><td>1<td>E<tr><td>2<td>O<tr><td>3<td>H<tr><td>3<td>!<tr><td>3<td>.<tr><td>6<td>-<tr><td>6<td>S<tr><td>7<td>T<tr><td>8<td>I<tr><td>12<td>M<tr><td>15<td>A<tr><td>17<td> </table></div><p>As displayed above, the table is sorted to ensure consistency in each step of the compression process.</p><h2 id="tree-building"> <a href="#tree-building" class="anchor-heading" aria-labelledby="tree-building"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Tree Building</h2><p>Once the frequency table is created, the huffman encoder builds a huffman tree. A huffman tree follows the same structure as a normal binary tree, containing nodes and leafs. Each Huffman Leaf containst two values, the frequency it’s corresponding value.</p><p>To build the tree, we traverse our table of frequencies and characters, and push the characters with the highest frequencies to the top of tree. Continiuing the traversal until each table value is repersented on a Huffman Leaf.</p><p>That might be confusing, so lets break it down step by step.</p><p>Huffman compression works by taking existing 8 bit characters and assigning them to a smaller number of bits. To optimize the compression, the characters with the highest frequency are given smaller bit values.</p><p>A Huffman Tree helps us assign and visualize the new bit value assigned to existing characters. Simmilar to a binary tree, if we start at the root node, we can traverse the tree by using 1 to move to the right and 0 to move to the left. The position of a leaf node relative the root node is used to determine it’s new bit value.</p><p>A huffman tree for our example is depicted below: <img src="https://i.ibb.co/jyPPwnw/Screen-Shot-2020-08-31-at-10-34-00-AM.png" alt="Sample Huffman Tree" /></p><p>As shown in the image, Huffman trees can get very large and complicated very easily. To see a sample tree for any text go to url.</p><p>To understand more about the programatic implementation of tree building, click here.</p><h2 id="character-encoding"> <a href="#character-encoding" class="anchor-heading" aria-labelledby="character-encoding"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Character Encoding</h2><p>Character encoding is the final step for most huffman encoders. Once a tree and frequency table has built, the final step is to encode the characters from the inital file and write the encoded bytes to a new file.</p><p>This can be done in two ways.</p><ul><li><a href="#Tree&nbsp;Traversal">Tree Traversal</a><li><a href="#Array&nbsp;Indexing">Array Indexing</a></ul><h3 id="tree-traversal"> <a href="#tree-traversal" class="anchor-heading" aria-labelledby="tree-traversal"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Tree Traversal</h3><p>Tree traversal is the first way of encoding the input of a huffman encoder. For each character, the tree is traversed recursively until a leaf with a matching character is found.</p><p>This method can easily get complicated and very ineffecient as the tree has to be traversed multiple times.</p><p>For a simpler and quicker solution, we can use <a href="#Array&nbsp;Indexing">Array Indexing</a></p><h3 id="array-indexing"> <a href="#array-indexing" class="anchor-heading" aria-labelledby="array-indexing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Array Indexing</h3><p>When compared to the previous tree traversal method, array indexing is much less complicated and significantly faster.</p><p>Before encoding the characters, the tree is traversed once and the values for each leaf are outputed in two corresponding arrays. The first array contains the value of each character, while the second contains its updated bit value.</p><p>Once created, the arrays are treversed and each character in the input is replaced with its updated bit value.</p><p>Once a new output text is generated, it is encoded as a byte array and written to the output file.</p><hr><footer><p><a href="#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-000 mb-0">If you see something off, please consider <a href="https://go-compression.github.io/contributing/">contributing</a>.</p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/go-compression/go-compression.github.io/edit/master/site/algorithms/huffman.md" id="edit-this-page">Edit this page on GitHub.</a></p></div></footer></div></div><div class="search-overlay"></div></div>
